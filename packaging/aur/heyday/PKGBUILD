# Maintainer: mlm-stuff <later@mail.com>
pkgname=soredowe
pkgver=0.1.0
pkgrel=1
pkgdesc="GUI for pacman/AUR rookies (Wayland/Vulkan)"
arch=('x86_64')
url="https://github.com/mlm-games/soredowe"
license=('GPLv3')
depends=('polkit' 'wayland' 'vulkan-icd-loader' 'fontconfig' 'hicolor-icon-theme' 'git')
makedepends=('rust' 'cargo' 'clang' 'pkgconf' 'git')
source=("git+https://github.com/mlm-games/soredowe.git#tag=v${pkgver}")
sha256sums=('SKIP')

build() {
  cd "$srcdir/soredowe"
  cargo build --release -p app_shell
}

package() {
  cd "$srcdir/soredowe"
  install -Dm755 "target/release/app_shell" "$pkgdir/usr/bin/soredowe"
  install -Dm644 packaging/desktop/soredowe.desktop "$pkgdir/usr/share/applications/soredowe.desktop"
  install -Dm644 packaging/metainfo/io.github.mlm_games.soredowe.metainfo.xml "$pkgdir/usr/share/metainfo/io.github.mlm_games.soredowe.metainfo.xml"
  install -Dm644 packaging/icons/hicolor/scalable/apps/soredowe.svg "$pkgdir/usr/share/icons/hicolor/scalable/apps/soredowe.svg"
}
